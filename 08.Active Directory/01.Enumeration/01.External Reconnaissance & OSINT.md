# External Reconnaissance & OSINT
**Concept:** Before touching the target infrastructure, we gather intelligence from public sources.
**Goal:** Map the attack surface (IPs, Domains), identify key personnel (Emails, Usernames), and find leaked secrets (Passwords, API Keys).
## 1. Infrastructure Reconnaissance (The Scope)
**Goal:** Identify what the target owns (IP Blocks, ASNs, Cloud Assets).

| **Resource** | **Tool**                           | **Purpose**                                                   |
| ------------ | ---------------------------------- | ------------------------------------------------------------- |
| *ASN / IP*   | `BGP Toolkit (bgp.he.net)`         | Identify owned IP blocks and Autonomous System Numbers (ASN). |
| *Cloud*      | `Grayhat Warfare` / `Google Dorks` | Locate exposed S3 buckets, Azure Blobs, and shadow IT.        |
| *Registrars* | `Whois` / `ViewDNS.info`           | Find ownership details and technical contacts.                |
**Workflow:**
1. Search `bgp.he.net` for the Organization Name. 
2. Identify **IPv4/IPv6 CIDRs**.
3. **Warning:** Verify if IPs are self-hosted or Cloud (AWS/Azure). _Do not attack out-of-scope neighbors._
## 2. DNS Enumeration & Validation
**Goal:** Validate the scope provided by the client and find hidden subdomains.
**Tools:** `DomainTools`, `ViewDNS.info`, `PTRArchive`.

**Manual Validation (CLI):**
```shell
# Check Nameservers (Who hosts the DNS?)
nslookup -type=NS target.com

# Check IP Resolution
nslookup target.com

# Check Mail Servers (MX) - Good for identifying email providers (O365/GSuite)
dig target.com MX
```
## 3. Organizational Intelligence (People & Tech)
**Goal:** Build a list of valid usernames for password spraying and understand the tech stack.
### Job Postings (LinkedIn, Indeed)
- **Tech Stack:** "Looking for a Splunk Administrator" -> They use Splunk.
- **Versions:** "Experience with SharePoint 2013" -> Legacy/Vulnerable software.
- **Security Maturity:** "Hiring SOC Analyst" -> Active monitoring is likely.
### Username Harvesting (LinkedIn)
**Tool:** `linkedin2username`
Generates username lists based on company naming conventions (e.g., `flast` -> `jsmith`).
```shell
# Clone and setup
git clone https://github.com/initstring/linkedin2username
cd linkedin2username
pip3 install -r requirements.txt

# Run (Requires a valid LinkedIn account)
python3 linkedin2username.py --username <YOUR_EMAIL> --company "Inlane Freight"
```
### Hunting for Files (Metadata)
Publicly available documents (PDF, DOCX, XLSX) often contain internal paths, usernames, and software versions in their metadata.

**Google Dorks:**
```shell
site:target.com filetype:pdf
site:target.com filetype:docx
site:target.com filetype:xlsx "password"
```
## 4. Credential Hunting & Leaks
**Goal:** Find passwords that have already been breached. **This is often the fastest way in.**
### Breach Databases
**Tools:** `HaveIBeenPwned`, `Dehashed`.
**Action:** Search for corporate emails. If you find a cleartext password, try it on VPN, OWA, or SSH.

**Dehashed (CLI Example):**
```shell
# Query the domain for leaked credentials
sudo python3 dehashed.py -q inlanefreight.local -p
```
### Code Repositories (GitHub/GitLab)
Developers often accidentally commit secrets.
**Tools:** `TruffleHog`, `GitRob`.

**Manual Search:**
```txt
"target.com" password
"target.com" api_key
"target.com" jdbc
```